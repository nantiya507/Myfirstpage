define(["lodash","coreUtilsLib"],function(n,e){return function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=6)}([function(e,t){e.exports=n},function(n,e,t){"use strict";t.r(e),t.d(e,"isMergeVirtualGroup",function(){return a}),t.d(e,"isRescaleVirtualGroup",function(){return c}),t.d(e,"isVirtualGroup",function(){return u}),t.d(e,"isDesktopOnlyComponent",function(){return s}),t.d(e,"isTextComponent",function(){return f}),t.d(e,"isGraphicComponent",function(){return l}),t.d(e,"isGroupComponent",function(){return d}),t.d(e,"isColumnsContainerComponent",function(){return m}),t.d(e,"isImageComponent",function(){return p}),t.d(e,"isMasterPage",function(){return v}),t.d(e,"isDockingAllowed",function(){return g}),t.d(e,"isFixedPositionAllowed",function(){return h}),t.d(e,"shouldStretchToScreenWidth",function(){return y}),t.d(e,"extractComponentsFromStructureByType",function(){return C}),t.d(e,"isScreenWidthComponent",function(){return T}),t.d(e,"translateComps",function(){return E}),t.d(e,"reparentComponent",function(){return D}),t.d(e,"addComponentsTo",function(){return O}),t.d(e,"removeChildrenFrom",function(){return b}),t.d(e,"removeGroup",function(){return N}),t.d(e,"containsComponent",function(){return S}),t.d(e,"getHeightAccordingToChildren",function(){return I}),t.d(e,"ensureContainerTightlyWrapsChildren",function(){return x}),t.d(e,"isSiteSegmentOrPage",function(){return M}),t.d(e,"isPageComponent",function(){return _}),t.d(e,"isContainerComponent",function(){return P}),t.d(e,"isSiteSegment",function(){return w}),t.d(e,"isAllowedToBeInMasterPage",function(){return A}),t.d(e,"extractMobilePage",function(){return R}),t.d(e,"getComponentByIdFromStructure",function(){return k}),t.d(e,"unifyGroups",function(){return B}),t.d(e,"getComponentsByIds",function(){return L}),t.d(e,"getParent",function(){return G}),t.d(e,"getSnugLayout",function(){return F}),t.d(e,"getTinyMenuDefaultPosition",function(){return H}),t.d(e,"getChildren",function(){return j}),t.d(e,"getRangesOverlap",function(){return z}),t.d(e,"getYOverlap",function(){return W}),t.d(e,"getXOverlap",function(){return U}),t.d(e,"hasGreaterArea",function(){return V}),t.d(e,"haveSufficientOverlap",function(){return X}),t.d(e,"isEmptyContainer",function(){return q}),t.d(e,"shouldReparentCompToChildOfContainer",function(){return Q}),t.d(e,"getAllCompsInStructure",function(){return K});var o=t(0),r=t(2),i=t(4),a=function(n){return o.get(n,"componentType")===r.a.VIRTUAL_GROUP_TYPES.MERGE},c=function(n){return o.get(n,"componentType")===r.a.VIRTUAL_GROUP_TYPES.RESCALE},u=function(n){return c(n)||a(n)};function s(n){return o.get(n,["conversionData","desktopOnly"],!1)}function f(n){return"text"===o.get(n,["conversionData","category"])}function l(n){return"graphic"===o.get(n,["conversionData","category"])||p(n)}function d(n){return n&&"wysiwyg.viewer.components.Group"===n.componentType}function m(n){return"columns"===o.get(n,["conversionData","category"])}function p(n){return"photo"===o.get(n,["conversionData","category"])}function v(n){return"masterPage"===o.get(n,"id")}function g(n){return o.get(n,["conversionData","isDockingAllowed"])}function h(n){return o.get(n,["conversionData","isFixedPositionAllowed"])}function y(n){var e=function(n){return o.get(n.conversionData,"isScreenWidth",!1)||o.get(n.conversionData,"stretchHorizontally",!1)||o.some(n.components,e)};return M(n)||e(n)}function C(n,e){var t=j(n),r=o.remove(t,function(n){return o.includes(e,n.componentType)});return o.concat(r,o.flatMap(t,C))}function T(n){return o.get(n.conversionData,"isScreenWidth",!1)||o.some(n.components,T)}function E(n,e,t){void 0===e&&(e=0),void 0===t&&(t=0),o.forEach(n,function(n){n.layout.x+=e,n.layout.y+=t})}function D(n,e,t){O(n,[e],t),E([e],-n.layout.x,-n.layout.y)}function O(n,e,t){var o=j(n);e.length&&o&&(t=void 0!==t?t:o.length,o.splice.apply(o,[t,0].concat(e)))}function b(n,e){var t=j(n);o.remove(t,function(n){return o.includes(e,n)})}function N(n,e){if(d(n)){var t=o.findIndex(e.components,{id:n.id});o.forEach(n.components.reverse(),function(o){O(e,[o],t),E([o],n.layout.x,n.layout.y)}),o.remove(e.components,n)}}function S(n,e){return o.some(j(n),function(n){return e(n)||n&&S(n,e)})}function I(n,e,t){if(!v(n)&&e&&(t||!o.isEmpty(e))){var i=o(e).reject(["conversionData.isInvisible",!0]).reduce(function(n,e){return o.max([n,e.layout.y+e.layout.height,0])},0);return o.get(n,["conversionData","hasTightYMargin"])||o.get(n,["conversionData","hasTightBottomMargin"])?i:i+(y(n)?r.a.SECTION_MOBILE_MARGIN_Y:r.a.COMPONENT_MOBILE_MARGIN_Y+o.get(n.conversionData,"borderWidth",0))}}function x(n,e,t,r){void 0===r&&(r=0);var i=I(n,e,t);if(o.isNumber(i)){var a=o.get(n,["conversionData","minHeight"],r);n.layout.height=Math.max(a,i)}}function M(n){return _(n)||w(n)}function _(n){return"Page"===n.type}function P(n){return"Container"===n.type}function w(n){return o.has(n.conversionData,"siteSegmentRole")}function A(n){return w(n)||o.has(n.conversionData,"isAllowedToBeChildOfMasterPage")}function R(n){var e=i.objectUtils.cloneDeep(n),t=o.has(e,"components")?"components":"children";return o.set(e,t,n.mobileComponents||[])}function k(n,e){if(e.id===n)return e;var t=null;return o.find(j(e),function(e){return t=k(n,e)}),t}function B(n,e){if(n.length>e)n.length=0;else for(var t=function(e){var t=o.findLastIndex(n,function(t,r){return r<e&&(i=n[e],a=t,o.size(o.intersection(i,a))>0);var i,a});-1!==t&&(n[t]=n[t].concat(o.difference(n[e],n[t])),n.splice(e,1))},r=n.length-1;r>=0;r--)t(r)}function L(n,e){var t=j(n);return o.map(e,function(n){return o.find(t,{id:n})||null})}function G(n,e){var t=j(e);if(o.find(t,{id:n}))return e;var r=null;return o.find(t,function(e){return r=G(n,e)}),r}function F(n){if(n&&0!==n.length){var e=o.min(o.map(n,"layout.x")),t=o.min(o.map(n,"layout.y"));return{x:e,y:t,width:o.max(o.map(n,function(n){return n.layout.x+n.layout.width}))-e,height:o.max(o.map(n,function(n){return n.layout.y+n.layout.height}))-t,rotationInDegrees:0}}}function H(){return{x:r.a.MOBILE_WIDTH-(r.a.TINY_MENU_SIZE+r.a.SITE_SEGMENT_PADDING_X),y:r.a.SECTION_MOBILE_MARGIN_Y,rotationInDegrees:0}}function j(n){return n.components||n.children}function z(n,e){void 0===n&&(n=[]),void 0===e&&(e=[]);var t=function(n,e){return Math.min(n[1],e[1])-e[0]};return n[0]<=e[0]?t(n,e):t(e,n)}function W(n,e){var t=function(n){return[n.layout.y,n.layout.height+n.layout.y]};return z(t(n),t(e))}function U(n,e){if(T(n))return e.layout.width;if(T(e))return n.layout.width;var t=function(n){return[n.layout.x,n.layout.width+n.layout.x]};return z(t(n),t(e))}var Y=function(n){return n.layout.width*n.layout.height};function V(n,e){return T(n)?n.layout.height>=e.layout.height||Y(n)>Y(e):!T(e)&&Y(n)>Y(e)}function X(n,e,t){var o=U(n,e),r=W(n,e);if(o<=0||r<=0)return!1;var i=o*r,a=Math.min(Y(n),Y(e));return i>0&&i/a>=t}function q(n){return!!P(n)&&("columns"===n.conversionData.category?1===o.size(n.components)&&o.isEmpty(n.components[0].components):o.isEmpty(n.components))}function Q(n,e){return m(e)&&o.get(n,["conversionData","isInvisible"],!1)}function K(n,e,t){void 0===e&&(e=!1);for(var r=[[n]],i=0,a=r;i<a.length;i++){var c=a[i];o.forEach(c,function(n){var t=e?o.get(n,"mobileComponents"):j(n);o.isEmpty(t)||r.push(t)})}return o(r).flatten().remove(t).keyBy("id").value()}},function(n,e,t){"use strict";t.d(e,"a",function(){return o});var o={MOBILE_WIDTH:320,MARGIN_BETWEEN_TEXT_AND_NON_TEXT:20,COMPONENT_MOBILE_MARGIN_X:10,COMPONENT_MOBILE_MARGIN_Y:10,SECTION_MOBILE_MARGIN_Y:20,SITE_SEGMENT_PADDING_X:20,TINY_MENU_SIZE:50,TEXT_MAX_LENGTH_FOR_RESCALING:25,MIN_WIDTH_FOR_ENLARGE:140,DEFAULT_TEXT_HEIGHT:10,VIRTUAL_GROUP_TYPES:{RESCALE:"RESCALE_VIRTUAL_GROUP",MERGE:"MERGE_VIRTUAL_GROUP"}}},function(n,e,t){"use strict";t.d(e,"e",function(){return a}),t.d(e,"c",function(){return c}),t.d(e,"b",function(){return u}),t.d(e,"a",function(){return f}),t.d(e,"d",function(){return d}),t.d(e,"g",function(){return m}),t.d(e,"h",function(){return p}),t.d(e,"f",function(){return v});var o=t(0),r=t(1),i=.1,a=function(n){return 0===n?0:n/Math.abs(n)},c=function(n,e){return"x"===e?n.layout.width:n.layout.height},u=function(n,e){return n.layout[e]+c(n,e)};function s(n,e,t,r){void 0===r&&(r=i);var a=o.get(n,t),c=o.get(e,t);return Math.abs(a-c)<=r*o.min([a,c])}function f(n,e,t){return n===e||o.size(n)===o.size(e)&&!l(n,t)&&!l(e,t)&&o.every(n,function(n,r){var a=e[r];return n.componentType===a.componentType&&function(n,e,t,r){void 0===r&&(r=i);var a=o.get(n,["layout",t]),u=o.get(e,["layout",t]);return Math.abs(a-u)<=r*o.min([c(n,t),c(e,t)])}(n,a,t)&&("text"===n.conversionData.category?s(n,a,["conversionData","averageNormalizedFontSize"]):s(n,a,["layout","height"])&&s(n,a,["layout","width"]))})}function l(n,e){var t=o.findIndex(n,function(t,r){if(0===r)return!1;var i=u(n[r-1],e),a=t.layout[e]-i;return a<0||a>o.min([c(n[r-1],e),c(t,e)])});return-1!==t&&t!==n.length-1}function d(n){var e=r.getChildren(n);return o.map(n.conversionData.componentsOrder,function(n){return o.find(e,{id:n})})}var m=function(n){return r.isRescaleVirtualGroup(n)&&"reorder"!==n.conversionData.rescaleMethod||n.conversionData.structuralContainer};function p(n,e){var t=o.map(r.getChildren(n),"id");return o.sortBy(e,function(n){return t.indexOf(n.id)})}function v(n){var e=o.pick(n.conversionData.mobileHints,["recommendedWidth","recommendedHeight","recommendedScale","recommendedOrder"]);return!o.isEmpty(e)}},function(n,t){n.exports=e},function(n,e,t){"use strict";t.d(e,"a",function(){return g}),t.d(e,"b",function(){return h}),t.d(e,"c",function(){return S});var o=t(0),r=t(3),i=t(4),a={START_EVENT:"start",END_EVENT:"end"},c=.9,u={HORIZONTAL:1,VERTICAL:1.25};function s(n,e){return o.transform(n,function(n,t,o){var r=e(o);return n[r]=n[r]||{comps:[],distanceToPreviousFragment:t.distanceToPreviousFragment},n[r].comps=n[r].comps.concat(t.comps),n},[])}var f={singleCompRow:function(n,e,t){if("x"===t)return null;var i=o.findIndex(n,function(n){return 1===o.size(n.comps)});if(-1===i)return null;var a=s(n,function(n){return Object(r.e)(n-i)+Object(r.e)(i)});return{type:"singleCompRow",fragments:a,fragmentsEvents:E(e,a)}},verticalDivider:function(n,e,t){if(o.size(n)<3||o.every(n,function(n){return 1===o.size(n.comps)})||"y"===t)return null;var i=function(n,e){var t=o(e.y).partition({eventType:a.START_EVENT}).map(function(n){return o.map(n,"coordinate")}).value(),i=o.max(t[0]),c=o.min(t[1]);return o.findIndex(n,function(n){var e=n.comps[0];return 1===n.comps.length&&e.conversionData.keepIfVerticalDivider&&e.layout.y<=c&&Object(r.b)(e,"y")>=i})}(n,e);if(-1===i)return null;o.set(n[i].comps[0],["conversionData","isVerticalDivider"],!0);var c=s(n,function(n){return Object(r.e)(n-i)+Object(r.e)(i)});return{type:"verticalDivider",fragments:c,fragmentsEvents:E(e,c)}},mirrorPattern:function(n,e,t){if(o.size(n)<2)return null;var i=E(e,n),a=d(t),c=o.map(i,function(n){return l(n[a])}),u=o.every(c,function(n){return Object(r.a)(n,c[0],a)});return u&&u?p(o.flatten(c),e,{type:"mirrorPattern"}):null},chessPattern:function(n,e,t){if("y"!==t||o.size(n)<2||!o.every(n,function(n){return 2===o.size(n.comps)}))return null;var r=E(e,n),i=o.map(r,function(n){return l(n.x)}),a=o.flatMap(i,function(n,e){return m(e)?n:o.reverse(n)}),c=a[0].conversionData.category,u="text"===c?"photo":"text";return o.every(a,function(n,e){return n.conversionData.category===(m(e)?c:u)})?p(a,e,{type:"chessPattern"}):null}},l=function(n){return o(n).map("compRef").uniq().value()},d=function(n){return"x"===n?"y":"x"},m=function(n){return n%2==0};function p(n,e,t){return o.assign(t,{fragments:[{comps:n,distanceToPreviousFragment:-1}],fragmentsEvents:[e]})}function v(n,e){var t=o.findLastIndex(n,function(n){if(n.coordinate===e.coordinate){if(n.eventType===a.START_EVENT&&e.eventType===a.START_EVENT)return n.size>e.size;if(n.eventType===a.END_EVENT&&e.eventType===a.END_EVENT)return n.size<e.size;if(n.eventType===a.START_EVENT&&e.eventType===a.END_EVENT)return n.compRef===e.compRef;if(n.eventType===a.END_EVENT&&e.eventType===a.START_EVENT)return n.compRef!==e.compRef}return n.coordinate<e.coordinate});return n.splice(t+1,0,e),n}function g(n,e){var t=o.transform(n,function(n,t){var o=t.layout[e]||0,i=Object(r.b)(t,e)||o,c=Object(r.c)(t,e)||0;return v(n,{eventType:a.START_EVENT,compRef:t,coordinate:o,size:c}),v(n,{eventType:a.END_EVENT,compRef:t,coordinate:i,size:c}),n},[]);return o.map(t,function(n){return o.omit(n,"size")})}function h(n){var e=[],t=[];return o.forEach(n,function(n){var r=o.last(t);if(n.eventType===a.START_EVENT){if(o.isEmpty(e)){var i={events:[n],distanceToPreviousFragment:r?n.coordinate-o.last(r.events).coordinate:-1};t.push(i)}else r.events.push(n);e.push(n)}else o.remove(e,{compRef:n.compRef}),r.events.push(n)}),o.map(t,function(n){return{comps:l(n.events),distanceToPreviousFragment:n.distanceToPreviousFragment}})}function y(n,e,t){var r=o.maxBy(n,"distanceToPreviousFragment"),i=o.findIndex(n,r),a=s(n,function(n){return n<i?0:1}),c=[n[i-1],r],u=o.filter(e[d(t)],function(n){return o.some(c,function(e){return o.includes(e.comps,n.compRef)})}),f={fragmentsEvents:E(e,a),fragments:a},l=C(c,u,t);return o.assign(f,{maxCompsDistance:l})}function C(n,e,t){var i=function(n,e){return o(n).map(function(n,t){return t?o.map(n,function(n){return o.defaults({closestPoint:n.compRef.layout[e]},n)}):o.map(n,function(n){return o.defaults({closestPoint:Object(r.b)(n.compRef,e)},n)})}).map(function(n,e){return o.reduce(n,function(n,t){var r=o.last(n);return r&&r.eventType!==a.END_EVENT?r.compRef===t.compRef?n.concat([t]):((e&&t.closestPoint<r.closestPoint||!e&&t.closestPoint>r.closestPoint)&&n.splice(n.length-1,1,t),n):n.concat(t.eventType===a.START_EVENT?[t]:[])},[])}).value()}(o.partition(e,function(e){return o.includes(n[0].comps,e.compRef)}),t),c=[0,0],u=[[],[]];for(var s=-1/0;c[0]<i[0].length||c[1]<i[1].length;){var f=c[0]===i[0].length||c[1]===i[1].length?c[0]===i[0].length?1:0:i[0][c[0]].coordinate<=i[1][c[1]].coordinate?0:1,l=i[f][c[f]++];if(l.eventType!==a.END_EVENT){u[f].push(l);var d=[o.maxBy(u[0],"closestPoint"),o.minBy(u[1],"closestPoint")],m=o.get(d,[1,"closestPoint"])-o.get(d,[0,"closestPoint"]);!o.isNaN(m)&&m>s&&(s=m)}else o.remove(u[f],{compRef:l.compRef})}return s}function T(n,e){return o.transform(n,function(n,t){var r=o.findIndex(e,function(n){return o.includes(n.comps,t.compRef)});return n[r]=(n[r]||[]).concat([t]),n},[])}function E(n,e){var t=T(n.x,e),r=T(n.y,e);return o.map(o.keys(e),function(n){return o.assign({},{x:t[n],y:r[n]})})}function D(n,e,t){return function(n,e,t){var r=null;return o.forEach(f,function(o,i){if(!t[i])return!0;var a=o(e.y,n,"y"),c=o(e.x,n,"x");return null===(r=a&&c?null:a||c)}),r}(n,e,t)||function(n,e){var t=o.size(e.x)>1?y(e.x,n,"x"):null,r=o.size(e.y)>1?y(e.y,n,"y"):null;if(t&&r){var i=u.HORIZONTAL*t.maxCompsDistance>u.VERTICAL*r.maxCompsDistance?t:r;return o.pick(i,["fragments","fragmentsEvents"])}return t||r}(n,e)}function O(n,e,t,i){if(o.size(e)<2)return e||[];var a=o.mapValues(t,h);if(1===o.size(a.x)&&1===o.size(a.y))return i.detectSemanticGroups?i.useOverlapRules?function(n,e){e=Object(r.h)(n,e);var t="overlayGroup_"+(e=o.sortBy(e,"layout.y"))[0].id;return o.forEach(e,function(n){return o.set(n,["conversionData","overlayGroupId"],t)}),e}(n,e):function(n,e,t){var r=function(n){return o.some(n,"conversionData.originalLayout")};if(r(e)||o.some(e,function(n){return r(n)}))return N(e),e;b(e);var i=g(e,"y"),a=g(e,"x"),c=O(n,e,{y:i,x:a},t);return N(c),c}(n,e,i):Object(r.h)(n,e);var c=D(t,a,{mirrorPattern:i.detectSemanticGroups,chessPattern:i.detectSemanticGroups,verticalDivider:!0,singleCompRow:!0});return 1===o.size(c.fragments)?c.fragments[0].comps:o.flatMap(c.fragments,function(e,t){return O(n,e.comps,c.fragmentsEvents[t],i)})}function b(n){o.forEach(n,function(n){var e=n.layout,t=o.assign(i.objectUtils.cloneDeep(e),{height:e.height*c,width:e.width*c});n.layout=t,o.set(n,["conversionData","originalLayout"],e)})}function N(n,e){void 0===e&&(e=!0),o.forEach(n,function(n){var e=o.get(n,["conversionData","originalLayout"]);e&&(n.layout=i.objectUtils.cloneDeep(e),delete n.conversionData.originalLayout)}),e&&o.forEach(n,function(n){return N(n.components,!1)})}function S(n,e,t){var r=O(n,e,{y:g(e,"y"),x:g(e,"x")},t);n.conversionData.componentsOrder=o.map(r,"id")}r.h},function(n,e,t){"use strict";t.r(e);var o={};t.r(o),t.d(o,"getAdditionalStyles",function(){return x}),t.d(o,"addToStructure",function(){return M});var r={};t.r(r),t.d(r,"addToStructure",function(){return P});var i=t(0),a={"adobe-caslon-w01-smbd":{referencePoints:[17,40,82],friendlyName:"Adobe Caslon"},'"amatic sc"':{referencePoints:[18,42,84],friendlyName:"Amatic SC"},"americantypwrteritcw01--731025":{referencePoints:[16,42,84],friendlyName:"American Typewriter"},anton:{referencePoints:[15,36,78],friendlyName:"Anton"},arial:{referencePoints:[15,40,82],friendlyName:"Arial"},'"arial black"':{referencePoints:[15,40,82],friendlyName:"Arial Black"},"avenida-w01":{referencePoints:[20,45,88],friendlyName:"Avenida"},"avenir-lt-w01_85-heavy1475544":{referencePoints:[15,40,82],friendlyName:"Avenir"},"avenir-lt-w01_35-light1475496":{referencePoints:[15,40,82],friendlyName:"Avenir Light"},basic:{referencePoints:[15,40,82],friendlyName:"Basic"},"belinda-w00-regular":{referencePoints:[19,44,88],friendlyName:"Belinda"},"bodoni-w01-poster":{referencePoints:[15,40,82],friendlyName:"Bodoni Poster"},"braggadocio-w01":{referencePoints:[15,36,78],friendlyName:"Braggadocio"},"brandon-grot-w01-light":{referencePoints:[18,42,86],friendlyName:"Brandon Grotesque"},"bree-w01-thin-oblique":{referencePoints:[16,40,82],friendlyName:"Bree"},caudex:{referencePoints:[16,41,84],friendlyName:"Caudex"},'"chelsea market"':{referencePoints:[15,40,82],friendlyName:"Chelsea Market"},cinzel:{referencePoints:[15,40,82],friendlyName:"Cinzel"},"clarendon-w01-medium-692107":{referencePoints:[17,44,84],friendlyName:"Clarendon LT"},'"comic sans ms"':{referencePoints:[15,40,82],friendlyName:"Comic Sans MS"},cookie:{referencePoints:[22,52,100],friendlyName:"Cookie"},"coquette-w00-light":{referencePoints:[18,44,84],friendlyName:"Coquette"},corben:{referencePoints:[16,42,82],friendlyName:"Corben"},'"courier new"':{referencePoints:[17,48,96],friendlyName:"Courier New"},"dinneuzeitgroteskltw01-_812426":{referencePoints:[15,40,82],friendlyName:"DIN Neuzeit Grotesk"},"din-next-w01-light":{referencePoints:[15,40,82],friendlyName:"DIN Next Light"},"droid-serif-w01-regular":{referencePoints:[15,40,82],friendlyName:"Droid Serif"},'"eb garamond"':{referencePoints:[18,42,84],friendlyName:"EB Garamond"},enriqueta:{referencePoints:[15,40,80],friendlyName:"Enriqueta"},forum:{referencePoints:[17,44,86],friendlyName:"Forum"},'"fredericka the great"':{referencePoints:[15,38,76],friendlyName:"Fredericka the Great"},"futura-lt-w01-book":{referencePoints:[15,38,76],friendlyName:"Futura"},"futura-lt-w01-light":{referencePoints:[15,38,76],friendlyName:"Futura Light"},georgia:{referencePoints:[15,40,80],friendlyName:"Georgia"},"geotica-w01-four-open":{referencePoints:[15,40,82],friendlyName:"Geotica Four Open"},"helvetica-w01-roman":{referencePoints:[15,40,82],friendlyName:"Helvetica"},impact:{referencePoints:[15,36,76],friendlyName:"Impact"},"itc-arecibo-w01-regular":{referencePoints:[18,44,88],friendlyName:"ITC Arecibo"},'"jockey one"':{referencePoints:[16,42,82],friendlyName:"Jockey One"},'"josefin slab"':{referencePoints:[18,42,82],friendlyName:"Josefin Slab"},jura:{referencePoints:[18,44,90],friendlyName:"Jura"},'"kelly slab"':{referencePoints:[15,38,78],friendlyName:"Kelly Slab"},"kepler-w03-light-scd-cp":{referencePoints:[18,45,85],friendlyName:"Kepler"},'"libre baskerville"':{referencePoints:[15,37,76],friendlyName:"Libre Baskerville"},"didot-w01-italic":{referencePoints:[15,40,82],friendlyName:"Linotype Didot"},lobster:{referencePoints:[17,42,82],friendlyName:"Lobster"},'"lucida console"':{referencePoints:[15,38,78],friendlyName:"Lucida Console"},'"lucida sans unicode"':{referencePoints:[15,38,78],friendlyName:"Lucida Sans Unicode"},"lulo-clean-w01-one-bold":{referencePoints:[14,36,76],friendlyName:"Lulo Clean"},'"marck script"':{referencePoints:[20,48,92],friendlyName:"Marck Script"},"marzo-w00-regular":{referencePoints:[15,40,78],friendlyName:"Marzo"},monoton:{referencePoints:[14,36,76],friendlyName:"Monoton"},"baskervillemtw01-smbdit":{referencePoints:[18,44,88],friendlyName:"Monotype Baskerville"},'"mr de haviland"':{referencePoints:[22,46,94],friendlyName:"Mr De Haviland"},"museo-w01-700":{referencePoints:[15,40,82],friendlyName:"Museo"},"museo-slab-w01-100":{referencePoints:[15,40,82],friendlyName:"Museo Slab"},niconne:{referencePoints:[20,46,90],friendlyName:"Niconne"},"nimbus-sans-tw01con":{referencePoints:[17,44,88],friendlyName:"Nimbus Sans"},'"noticia text"':{referencePoints:[15,40,82],friendlyName:"Noticia Text"},'"open sans"':{referencePoints:[15,40,82],friendlyName:"Open Sans"},'"open sans condensed"':{referencePoints:[15,40,82],friendlyName:"Open Sans Condensed"},overlock:{referencePoints:[16,42,84],friendlyName:"Overlock"},"pacifica-w00-condensed":{referencePoints:[14,36,74],friendlyName:"Pacifica Condensed"},'"palatino linotype"':{referencePoints:[16,44,86],friendlyName:"Palatino Linotype"},'"patrick hand"':{referencePoints:[17,44,86],friendlyName:"Patrick Hand"},"peaches-and-cream-regular-w00":{referencePoints:[26,54,120],friendlyName:"Peaches & Cream"},play:{referencePoints:[15,42,84],friendlyName:"Play"},'"playfair display"':{referencePoints:[15,40,82],friendlyName:"Playfair Display"},"proxima-n-w01-reg":{referencePoints:[15,41,82],friendlyName:"Proxima Nova"},raleway:{referencePoints:[15,40,82],friendlyName:"Raleway"},"reklamescriptw00-medium":{referencePoints:[16,40,80],friendlyName:"Reklame Script"},"rosewood-w01-regular":{referencePoints:[15,39,81],friendlyName:"Rosewood"},sacramento:{referencePoints:[24,46,88],friendlyName:"Sacramento"},sail:{referencePoints:[22,46,88],friendlyName:"Sail"},sarina:{referencePoints:[16,40,82],friendlyName:"Sarina"},signika:{referencePoints:[16,42,84],friendlyName:"Signika"},"snellroundhandw01-scrip":{referencePoints:[20,46,88],friendlyName:"Snell Roundhand"},"soho-w01-thin-condensed":{referencePoints:[16,40,82],friendlyName:"Soho Condensed"},spinnaker:{referencePoints:[15,40,82],friendlyName:"Spinnaker"},"stencil-w01-bold":{referencePoints:[14,38,78],friendlyName:"Stencil"},tahoma:{referencePoints:[15,40,82],friendlyName:"Tahoma"},'"times new roman"':{referencePoints:[16,42,86],friendlyName:"Times New Roman"},"trend-sans-w00-four":{referencePoints:[14,38,74],friendlyName:"Trend"},verdana:{referencePoints:[15,40,82],friendlyName:"Verdana"}},c={min:14,max:105},u={min:1,max:40},s=[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[18,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[19,19,19,19,19,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[20,20,20,20,19,19,19,19,19,19,19,19,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[21,21,21,20,20,20,20,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[22,22,21,21,21,21,20,20,20,20,20,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[22,22,21,21,21,21,20,20,20,20,20,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[23,23,22,22,21,21,21,20,20,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[25,24,23,23,22,22,22,21,21,21,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[26,25,24,23,23,22,22,22,21,21,21,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[27,26,25,24,24,23,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[28,27,26,25,24,23,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[29,28,27,26,25,24,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[31,30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[32,31,30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[33,32,31,30,29,28,27,26,25,24,24,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[34,33,32,31,30,29,28,27,26,25,24,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[34,33,32,31,30,29,28,27,26,25,24,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[36,35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[36,35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[38,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[38,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[38,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[39,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,38,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37]],f=[15,40,82];function l(n,e,t){return Math.max(Math.min(n,t),e)}var d=t(2),m=t(5),p=function(n,e){return m.a(n,e)},v=function(n){return i.map(m.b(n),"comps")},g=function(n){return i.get(n,["metaData","author"])};function h(n){var e=i.get(n,["metaData","originalCompId"]),t=g(n)||"studio";return i.assign({recommendedWidth:n.layout.width,recommendedHeight:n.layout.height,recommendedScale:n.layout.scale,author:t},e?{originalCompId:e}:{})}function y(n,e,t){return n?"rightTop"===t?{offsetX:e.layout.x-n.layout.x-n.layout.width,offsetY:e.layout.y-n.layout.y,offsetOrigin:t}:"leftBottom"===t?{offsetX:e.layout.x-n.layout.x,offsetY:e.layout.y-n.layout.y-n.layout.height,offsetOrigin:t}:{offsetX:e.layout.x-n.layout.x,offsetY:e.layout.y-n.layout.y,offsetOrigin:"leftTop"}:{offsetX:e.layout.x,offsetY:e.layout.y,offsetOrigin:"leftTop"}}function C(n,e,t){return void 0===e&&(e=0),void 0===t&&(t=0),t?"leftTop":e?"rightTop":n?"leftBottom":"leftTop"}function T(n){var e=i.map(n,"id"),t=p(n,"y"),o=v(t);return i.reduce(o,function(n,t,o){if(1===i.size(t))return n.concat([{preset:t[0],offsetOrigin:C(o)}]);var r=p(t,"x"),a=v(r);return i.reduce(a,function(n,t,r){if(1===i.size(t))return n.concat([{preset:t[0],offsetOrigin:C(o,r)}]);var a=i.sortBy(t,function(n){return e.indexOf(n.id)}),c=i.map(a,function(n,e){return{preset:n,offsetOrigin:C(o,r,e)}});return n.concat(c)},n)},[])}function E(n){var e=i.map(n.components,function(n){return E(n)}),t=T(n.components),o=i.reduce(t,function(n,e,o){var r=i.get(t,[o-1,"preset"],null),a=i.assign({},h(e.preset),y(r,e.preset,e.offsetOrigin),{orderIndex:o});return i.set(n,e.preset.id,a)},{});return i.assign.apply(i,[o].concat(e))}function D(n){if(n.mobileStructure){var e=i.assign({metaData:{}},i.pick(n,["id","componentType","type"]),i.pick(n.mobileStructure,["layout"]),i.pick(n.mobileStructure,"metaData"));if(i.has(n,"components")){var t=i(n.components).map(D).compact().value();i.set(e,"components",t)}return e}}var O=t(1),b={color_11:"tmFull1",color_27:"tmFull1",color_32:"tmFull1",color_15:"tmFull2",color_18:"tmFull2",color_25:"tmFull2"},N={type:"Component",id:"TINY_MENU",componentType:"wysiwyg.viewer.components.mobile.TinyMenu",skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",layout:i.merge(O.getTinyMenuDefaultPosition(),{height:d.a.TINY_MENU_SIZE,width:d.a.TINY_MENU_SIZE}),dataQuery:"#TINY_MENU",styleId:"tmFull1"},S="SITE_HEADER",I={tmFull1:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",style:{properties:{borderwidth:"0",bg:"color_11","alpha-bg":0,txt:"color_11",separatorHeight:"0",textAlignment:"center",txts:"color_18",iconcolor:"color_15",iconcolorSelected:"color_11"}}},tmFull2:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",style:{properties:{borderwidth:"0",bg:"color_11","alpha-bg":0,txt:"color_11",separatorHeight:"0",textAlignment:"center",txts:"color_18",iconcolor:"color_11",iconcolorSelected:"color_11"}}},tm2:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuSkin",style:{properties:{bg:"color_11",bgh:"color_13",bgs:"color_18",txts:"color_15",txt:"color_15"}}}},x=function(){return I};function M(n){var e=O.getComponentByIdFromStructure(S,n),t=i.get(b,i.get(e.conversionData,"backgroundColor"),"tmFull1"),o=i.defaults({styleId:t},N);O.addComponentsTo(e,[o]),O.ensureContainerTightlyWrapsChildren(e,e.components,!0)}var _={type:"Component",id:"BACK_TO_TOP_BUTTON",componentType:"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",skin:"wysiwyg.viewer.skins.backtotopbutton.BackToTopButtonSkin",layout:{height:0,width:0,x:0,y:0},dataQuery:null,styleId:""},P=function(n){return O.addComponentsTo(n,[_])},w={TINY_MENU:o,BACK_TO_TOP_BUTTON:r},A=["TINY_MENU","BACK_TO_TOP_BUTTON","QUICK_ACTION_BAR","QUICK_ACTION_BAR_ITEM","MENU_AS_CONTAINER_TOGGLE","MENU_AS_CONTAINER_EXPANDABLE_MENU"],R=["wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.BackToTopButton","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.QuickActionBar","wysiwyg.viewer.components.QuickActionBarItem","wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.ExpandableMenu"],k=function(n){return i.includes(R,i.get(n,"componentType"))};function B(n,e){var t=w[e];t&&!O.getComponentByIdFromStructure(e,n)&&t.addToStructure(n)}function L(n,e){if(e){for(var t=[],o=0;o<e.length;){var r=e[o];O.isVirtualGroup(r)&&(O.translateComps(r.components,r.layout.x,r.layout.y),O.addComponentsTo(n,r.components,o+1),t.push(r)),o++}O.removeChildrenFrom(n,t),i.forEach(e,function(n){return L(n,n.components)})}}var G=1e3;function F(n){return i.assign(n,{type:"undefined",id:i.toLower(n.componentType)+"_"+G++,skin:"undefined",styleId:"undefined"})}function H(n,e,t,o){var r=F({layout:O.getSnugLayout(e),conversionData:i.assign(t,{hasTightYMargin:!0,isTightContainer:!0,marginX:0}),componentType:d.a.VIRTUAL_GROUP_TYPES.RESCALE,components:e});return O.translateComps(e,-r.layout.x,-r.layout.y),O.removeChildrenFrom(n,e),O.addComponentsTo(n,[r],o),r}function j(n){i.forEach(n,function(n){n.layout&&!O.isFixedPositionAllowed(n)&&(n.layout.fixedPosition=!1)})}function z(n,e,t){var o=O.getAllCompsInStructure(n);return t.keepEmptyTextComponents||function n(e){var t;var o;if(e)for(t=e.length-1;t>=0;t--)o=e[t],O.isTextComponent(o)?0===i.get(o.conversionData,"textLength",0)&&e.splice(t,1):n(o.components)}(e),function n(e){i.remove(e,function(t,o){return!!(O.isScreenWidthComponent(t)&&i.get(t,["conversionData","isSolidColorBackground"])&&function(n,e){return i.find(e,function(e){return O.isScreenWidthComponent(e)&&n.layout.y===e.layout.y&&n.layout.height===e.layout.height})}(t,i.slice(e,o+1)))||(n(t.components),!1)})}(e),j(o),i.forEach(e,Y),V(n,e),X(n,e,t.keepNotRecommendedMobileComponents),t.keepOutOfScreenComponents||function n(e,t,o,r){var i=0;var a;var c;var u;if(t)for(;i<t.length;)a=t[i],c=a.layout.y+a.layout.height,u=a.layout.x+a.layout.width,c+r<0||a.layout.x>1500||u+o<-500?t.splice(i,1):(n(a,a.components,o+a.layout.x,r+a.layout.y),i++);return e}(n,e,0,0),function n(e){i.forEachRight(e,function(t,o){var r=q(t,i.slice(e,0,o))||q(t,i.slice(e,o),function(n){return i.get(n,["conversionData","isSemiTransparentContainer"],!1)});if(function(n,e){return e&&(i.get(e,["conversionData","nestOverlayingSiblings"],!0)||O.shouldReparentCompToChildOfContainer(n,e))&&!i.get(n,["conversionData","isNonContainableFullWidth"],!1)}(t,r)){var a=0;O.isColumnsContainerComponent(r)&&(a=r.layout.y,r=i.head(r.components)),O.reparentComponent(r,t),t.layout.y-=a,e.splice(o,1)}else n(t.components)});return e}(e),t.keepOccludedAndEmptyBackgrounds||function n(e){var t=function(n){return n.conversionData.hideWhenEmptyBackgroundContainer&&n.conversionData.isSolidColorBackground&&O.isEmptyContainer(n)};i.remove(e,function(e){return!!t(e)||("columns"===i.get(e,["conversionData","category"])&&i.every(e.components,t)||n(e.components),!1)})}(e),O.isMasterPage(n)&&W(e),t.keepInvisibleComponents||function n(e){i.forEachRight(e,function(t,o){var r=i.slice(e,o+1),a=q(t,r,i.negate(function(n){return i.get(n,["conversionData","isSemiTransparentContainer"],!1)||i.get(n,["conversionData","structuralItem"],!1)}),1);a?(i.set(t,["conversionData","mobileHints","hidden"],!0),e.splice(o,1)):n(t.components)})}(e),n}function W(n){var e=i.find(n,{id:"SITE_HEADER"}),t=i.find(n,{id:"SITE_FOOTER"});i(n).remove(i.negate(O.isAllowedToBeInMasterPage)).forEach(function(n){var o=function(n,e){var t=function(n){return n.layout.y+(n.layout.height||0)/2},o=t(n);return i.size(e)?i.minBy(e,function(n){var e=Math.abs(o-t(n));return i.isNaN(e)?0:e}):null}(n,[e,t]);O.reparentComponent(o,n)})}var U=function(n,e){return i.reduce(n,function(n,e){return n[e.id]=e,e.components&&U(e.components,n),n},e)};function Y(n){i.forEach(n.components,Y);var e=i.get(n,["conversionData","actualTextWidth"]);if(!(i.isUndefined(e)||e>=n.layout.width))if(0!==e){var t=i.get(n,["conversionData","textAlignments"],["left"]);if(1===i.size(t)){switch(i.head(t)){case"center":n.layout.x+=(n.layout.width-e)/2;break;case"right":n.layout.x+=n.layout.width-e}n.layout.width=e}}else n.layout.width=0}function V(n,e){for(var t=0,o=function(){var o=e[t],r=o.components;if(!i.get(o,["conversionData","mobileHints","hidden"]))return O.isColumnsContainerComponent(o)?(i(r).filter("conversionData.mobileHints.hidden").forEach(function(n){return O.translateComps(n.components,o.layout.x,o.layout.y)}),V(n,r)):V(o,r),t++,"continue";O.isContainerComponent(o)&&(O.translateComps(r,o.layout.x,o.layout.y),O.addComponentsTo(n,r),o.components=[]),e.splice(t,1)};t<i.size(e);)o()}function X(n,e,t){O.isMergeVirtualGroup(n)||i.remove(e,function(n){if(i.get(n,["conversionData","desktopOnly"])||!t&&i.get(n,["conversionData","hideByDefault"]))return!0;X(n,n.components,t)})}function q(n,e,t,o){return void 0===o&&(o=.75),O.isSiteSegmentOrPage(n)?null:i.find(e,function(e){return e.id!==n.id&&"PAGES_CONTAINER"!==e.id&&(!t||t(e))&&(O.isContainerComponent(e)||O.isPageComponent(e))&&(O.haveSufficientOverlap(e,n,o)||n.conversionData.isInvisible&&O.getYOverlap(e,n)>0)&&O.hasGreaterArea(e,n)})}var Q=t(4),K=90;function Z(n,e){i.forEachRight(Object(O.getChildren)(n),function(t,o){var r,a,c,u;if(J(t))return $(t)&&!nn(t)?((r=t).layout.rotationInDegrees=K,void i.assign(r.layout,Q.boundingLayout.getBoundingLayout(r.layout))):void(e&&(a=n,c=o,u=Object(O.getChildren)(a),i.remove(a.conversionData.componentsOrder,u[c].id),u.splice(c,1)));Z(t,e)})}var J=function(n){return i.get(n,["conversionData","keepIfVerticalDivider"],!1)},$=function(n){return J(n)&&i.get(n,["conversionData","isVerticalDivider"],!1)},nn=function(n){return n.layout.rotationInDegrees===K};function en(n,e){!function n(e){i.forEach(Object(O.getChildren)(e),function(e){$(e)?nn(e)&&(e.layout.rotationInDegrees=-K,i.assign(e.layout,Q.boundingLayout.getBoundingLayout(e.layout)),e.layout.rotationInDegrees=K):n(e)})}(n),L(n,e)}function tn(n){return n.layout&&(delete n.layout.anchors,k(n)||Object(O.isDockingAllowed)(n)||delete n.layout.docked),delete n.conversionData,n}function on(n){var e=Object(O.getAllCompsInStructure)(n);return i.forEach(e,tn),tn(n)}function rn(n,e){return i.reduce(e,function(e,t,o){return n[o]&&t.componentType&&n[o].componentType!==t.componentType&&e.push(o),e},[])}function an(n,e){var t=i.difference(i.keys(n),i.keys(e)),o=rn(n,e);return t.concat(o)}function cn(n,e){var t=i.difference(i.keys(e),i.keys(n));i.forEach(t,function(n){return delete e[n]})}function un(n,e){i.forEach(O.getAllCompsInStructure(e),function(e){var t=O.getComponentByIdFromStructure(e.id,n);t&&i.forEach(["dataQuery","nickname","behaviorQuery","connectionQuery"],function(n){t.hasOwnProperty(n)?e[n]=t[n]:delete e[n]})})}function sn(n,e){var t=i(n).filter(["conversionData.mobileHints.hidden",!0]).map("id").value(),o=function(n,e){if(i.isEmpty(e))return[];var t=i(e).filter(function(e){return!0===i.get(n,[e,"conversionData","filterChildrenWhenHidden"])}).uniq().value(),o=i(t).filter(function(e){return i.get(n[e],["conversionData","structuralContainer"],!1)}).flatMap(function(e){return i.map(O.getAllCompsInStructure(n[e],!1)||[],"id")}).compact().value(),r=i(t).filter(function(e){return O.isColumnsContainerComponent(n[e])}).flatMap(function(e){return i.get(n[e],"components",[])}).map("id").compact().value(),a=i.union(o,r);return i.difference(a,e)}(n,t),r=t.concat(o),a=i(e).values().reject(k).map("id").value(),c=i.intersection(a,r),u=i.map(n,"id"),s=i.difference(a,u),f=rn(n,e);return{idsOfComponentsToDelete:i.uniq(f.concat(s,c)),idsOfComponentsToAdd:i.difference(an(n,e),r)||[]}}var fn=t(3);function ln(n,e){var t,o;!function(n,e){i.forEach(e,function(t,o){t.conversionData.isTransparentContainer&&(t=i.head(t.components)||t);var r=e[o-1],a=Boolean(r),c=a&&r.layout.y+r.layout.height===t.layout.y&&r.layout.x===t.layout.x,u=i.get(n,["conversionData","hasTightMarginBetweenChildren"],!1);t.conversionData.tightWithPreviousSibling=c||a&&u})}(n,e),function(n,e){n.conversionData.hasTightBottomMargin=i.some(e,function(e){var t=i.get(e,["conversionData","isTransparentContainer"])&&!i.isEmpty(e.components)?i.head(e.components):e;return O.shouldStretchToScreenWidth(t)&&t.layout.y+t.layout.height>=n.layout.height})}(n,e),t=e,o=i.size(t)-1,i.forEach(t,function(n){var e=O.getChildren(n);n.conversionData.hasTightYMargin=!0===n.conversionData.isTightContainer||i.isEmpty(e)||!0===n.conversionData.isTransparentContainer&&(0===o||"column"!==n.conversionData.category)}),function(n,e){var t=i(e).map(function(n){var e=n.conversionData.textAlignments||[];return i(e).uniq().size()>1?"mixed":i.head(e)}).compact().uniq().value();1===i.size(t)&&(n.conversionData.naturalAlignment=i.head(t))}(n,e)}function dn(n,e){!function n(e,t){if(i.isEmpty(e.components))return;e.proportionGroups=e.proportionGroups||[];var o=[];var r=Q.objectUtils.cloneDeep(e);var a=O.getChildren(r);var c=function(){var n=pn(a[0],a);if(0===n.length)return i.remove(O.getChildren(r),a[0]),"continue";O.removeChildrenFrom(r,n),n.forEach(function(e){var t=pn(e,a);n=n.concat(t),O.removeChildrenFrom(r,t)}),n.length>1&&o.push(i.map(n,"id"))};for(;a.length>0;)c();e.proportionGroups=e.proportionGroups.concat(o);i.forEach(t,function(e){return n(e,e.components)})}(n,e),function n(e,t){var o=function(n){return i.find(e.components,{id:n})};i.forEach(e.proportionGroups,function(n){if(i.every(n,o)){var t=O.getComponentsByIds(e,n);H(e,t,{rescaleMethod:"proportional"})}});i.forEach(t,function(e){return n(e,e.components)})}(n,e),function n(e,t){delete e.proportionGroups;i.forEach(t,function(e){return n(e,e.components)})}(n,e)}function mn(n){return!O.isRescaleVirtualGroup(n)&&i.get(n,["conversionData","textLength"],0)<=d.a.TEXT_MAX_LENGTH_FOR_RESCALING&&i.get(n,["conversionData","isSuitableForProportionGrouping"],!1)&&i.every(n.components,mn)}function pn(n,e){return mn(n)?i.filter(e,function(e){return mn(e)&&O.haveSufficientOverlap(n,e,.25)}):[]}var vn=500;function gn(n,e,t,o){if(t<.01)return"break";if(t<.1)return"tight";var r=function(){return o>500?"h2v":"proportional"},a=function(){return o<500?"proportional":"tight"},c=function(){return"h2v"},u={photo:{text:r,graphic:r,photo:function(){return t>.5&&o<600?"proportional":"tight"}},graphic:{text:r,graphic:r,photo:r},text:{text:function(){return t>.5&&o<500?"proportional":"break"}},columns:{text:c,photo:c,graphic:c},group:{text:a,photo:a,graphic:a}};return i.get(u,[n,e],function(){return"break"})()}var hn=function(n){return n.layout.x},yn=function(n){return n.layout.y},Cn=function(n){return n.layout.width},Tn=function(n){return n.layout.height},En=function(n){return hn(n)+Cn(n)},Dn=function(n){return yn(n)+Tn(n)},On=function(n){return Cn(n)*Tn(n)},bn=function(n,e,t,o){return{layout:{x:o,y:n,width:Math.max(0,e-o),height:Math.max(0,t-n)}}},Nn=function(n,e){return bn(Math.max(yn(n),yn(e)),Math.min(En(n),En(e)),Math.min(Dn(n),Dn(e)),Math.max(hn(n),hn(e)))},Sn=function(n,e){return bn(Math.min(yn(n),yn(e)),Math.max(En(n),En(e)),Math.max(Dn(n),Dn(e)),Math.min(hn(n),hn(e)))};function In(n){return{rescaleMethod:"break",overlapRatio:0,conversionData:i.pick(n.conversionData,"category"),layout:n.layout,components:[n]}}function xn(n,e){var t=On(Nn(n,e))/On(e);return{rescaleMethod:gn(n.conversionData.category,e.conversionData.category,t,Cn(Sn(n,e))),overlapRatio:t}}function Mn(n,e){if(1===i.size(e.components)&&i.get(e.components[0],["conversionData","isInvisible"],!1))return n;var t=i.map(n,function(n){return xn(n,e)}),o=function(n){var e=i(n).map(function(n,e){return"break"!==n.rescaleMethod?e:null}).filter(i.isNumber.bind(i)).value();return i.size(e)<=1?e:i.every(e,function(e){return"proportional"===n[e].rescaleMethod})?e:[i.maxBy(e,function(e){return n[e].overlapRatio})]}(t);if(i.isEmpty(o))return n.concat([e]);var r=i.reduce(o,function(e,o){var r=n[o];return function(n){if(!i.includes(["h2v","tight"],n.rescaleMethod))return n;var e="tight"===n.rescaleMethod?0:n.overlapRatio;return i.forEach(n.components,function(n,t){t&&(i.assign(n.conversionData,{tightWithPreviousSibling:!0,yOffsetRatio:e}),O.isTextComponent(n)&&(n.conversionData.yOffset=n.conversionData.mobileScale*n.conversionData.mobileAdjustedAverageFontSize*.5))}),n}(i.assign({components:r.components.concat(e.components),layout:Sn(e,r).layout,conversionData:{category:"group",isTightContainer:!0,marginX:0}},t[o]))},e);return i.remove(n,function(n,e){return i.includes(o,e)}),n.push(r),i.reduce(n,Mn,[])}var _n=function(n){return i(n).groupBy("conversionData.overlayGroupId").filter(function(n,e){return e&&i.size(n)>1}).value()},Pn=function(n){return i(n).map(In).reduce(Mn,[])};function wn(n){var e=O.getSnugLayout(n);return e.width>=vn?i.findIndex(n,function(n){return i.isEqual(O.getSnugLayout([n]),e)}):-1}function An(n,e){return i.reduce(n,function(n,t,o){var r=Object(fn.e)(o-e)+(e?1:0);return n[r]?i.set(n,r,{components:n[r].components.concat([t]),rescaleMethod:"reorder"}):i.set(n,r,{rescaleMethod:"break",components:[t]})},[])}function Rn(n){var e=wn(n);return-1===e?[{rescaleMethod:"break",components:n}]:An(n,e)}function kn(n,e){var t={};return i.forEach(e,function(e){var o=H(n,e.components,{rescaleMethod:e.rescaleMethod,category:"boxContainer"}),r=i(e.components).map("id").reduce(function(n,e){return i.set(n,e,o)},{});i.assign(t,r)}),t}function Bn(n,e){Ln(n,kn(n,e))}function Ln(n,e){n.conversionData.componentsOrder=i.reduce(n.conversionData.componentsOrder,function(n,t){var o=i.get(e,[t,"id"],t);return i.includes(n,o)?n:n.concat([o])},[])}function Gn(n,e){Bn(n,i(_n(e)).flatMap(Rn).filter({rescaleMethod:"reorder"}).value())}function Fn(n,e){var t=i(_n(e)).map(function(e){return Object(fn.h)(n,e)}).flatMap(Pn).reject({rescaleMethod:"break"}).value();Bn(n,t)}var Hn={LOGO:{min:-10,max:25},ROW:{min:-10,max:80}},jn={MARKER:3,LOGO_TITLE:20},zn=100,Wn=20,Un=2,Yn=2,Vn={ROW:{rescaleMethod:"row"},LOGO:{rescaleMethod:"logo"}},Xn=function(n){return!n.layout.fixedPosition&&!n.layout.rotationInDegrees},qn=function(n){return-O.getXOverlap(n[0],n[1])},Qn=function(n,e){return i.inRange(qn(n),e.min,e.max)},Kn=function(n){return O.isTextComponent(n)&&n.conversionData.textLength<=jn.MARKER},Zn=function(n){return O.isGraphicComponent(n)&&n.layout.width<=zn},Jn=function(n){return Zn(n)||Kn(n)},$n=function(n){return i.find(n,Jn)},ne=function(n){return i.find(n,["conversionData.inlineWhenGrouped",!0])},ee=function(n){return(function(n){if(!i.every(n,O.isTextComponent)||!Qn(n,Hn.LOGO))return!1;var e=i(["textColors","averageFontSize","fontNames"]).map(function(e){return i.isEqual(i.get(n,[0,"conversionData",e]),i.get(n,[1,"conversionData",e]))}).compact().size(),t=i.sumBy(n,"conversionData.textLength");return e<=1&&t<=jn.LOGO_TITLE}(n)||function(n){var e=i.find(n,["conversionData.category","text"]),t=i.find(n,["conversionData.category","graphic"]);if(!e||!t)return!1;return Qn(n,Hn.LOGO)&&e.conversionData.textLength<=jn.LOGO_TITLE&&t.layout.width<=zn}(n))&&oe(n)},te=function(n){return i(n).sortBy("layout.x").map("id").value()},oe=function(n){return i.size(n)===Un&&n[0]&&n[1]&&O.getYOverlap(n[0],n[1])>0};function re(n,e){i(e).map(function(n,t){return function(n,e,t){var o=[t[e-1],n],r=[n,t[e+1]];if(ee(o)&&!ee(r))return{groupComps:o,conversionData:Vn.LOGO}}(n,t,e)}).compact().forEachRight(function(t){return ie(n,e,t)})}function ie(n,e,t){var o=n.conversionData.componentsOrder.indexOf(t.groupComps[0].id),r=i.assign({},t.conversionData,{componentsOrder:te(t.groupComps)}),a=H(n,t.groupComps,r,o);return n.conversionData.componentsOrder.splice(o,t.groupComps.length,a.id),e.splice(o,t.groupComps.length,a),a}function ae(n,e){var t=$n(n);return Qn(n,e)&&i.every(n,O.isTextComponent)&&Kn(t)}function ce(n,e){var t=$n(n),o=i.reject(n,t)[0];return Qn(n,e)&&O.isTextComponent(o)&&Zn(t)}function ue(n){if(!i.every(n,Xn))return!1;var e,t,o,r=i.take(n,Un),a=i.takeRight(n,Un),c=(e=r,t=i.take(e,Un),o=qn(t),{min:i.max([o-Wn,Hn.ROW.min]),max:i.min([o+Wn,Hn.ROW.max])});return(ce(r,Hn.ROW)&&ce(a,c)||ae(r,Hn.ROW)&&ae(a,c))&&oe(r)&&oe(a)}function se(n){var e=Yn*Un,t={foundLists:[],curChunk:[]};return i.forEach(n,function(n){t.curChunk.push(n);var o,r,a=i.last(t.foundLists);return a&&i.size(t.curChunk)===Un&&(o=a,r=t.curChunk,ue(i.take(o,Un).concat(r)))?(a.splice.apply(a,[a.length,0].concat(t.curChunk)),i.assign(t,{curChunk:[]})):i.size(t.curChunk)<e?void 0:ue(t.curChunk)?(t.foundLists.push(t.curChunk),i.assign(t,{curChunk:[]})):i.assign(t,{curChunk:i.tail(t.curChunk)})}),i.flatMap(t.foundLists,function(n){return function(n){return i(n).map(function(e,t){return t%Un?{conversionData:Vn.ROW,groupComps:[n[t-1],e]}:null}).compact().value()}(n)})}function fe(n){if(!Object(fn.g)(n)){var e=Object(fn.d)(n);i.size(e)&&(!function(n,e){n.conversionData.isTightContainer&&e.length===Un&&!O.shouldStretchToScreenWidth(n)&&Qn(e,Hn.ROW)&&ne(e)&&i.assign(n.conversionData,Vn.ROW,{componentsOrder:te(e)})}(n,e),function(n,e){var t=se(e);i.forEachRight(t,function(t){return ie(n,e,t)})}(n,e),re(n,e))}}function le(n){if(!Object(fn.f)(n)){fe(n);var e=Object(fn.d)(n);i.forEach(e,le)}}function de(n,e){var t=O.getChildren(n);if(t){var o=i.map(t,"id"),r=i.get(n,["conversionData","mobileHints","recommendedComponentsOrder"]);r?i.set(n,["conversionData","componentsOrder"],i.intersection(r,o)):(Object(fn.g)(n)?i.set(n,["conversionData","componentsOrder"],o):(Object(m.c)(n,t,e),e.detectSemanticGroups&&e.useOverlapRules&&function(n){Gn(n,Object(fn.d)(n)),Fn(n,Object(fn.d)(n))}(n)),ln(n,Object(fn.d)(n))),i.forEach(Object(fn.d)(n),function(n){return de(n,e)})}}function me(n,e){i.defaults(n,{conversionData:{}});var t=O.getChildren(n);t&&(e.detectSemanticGroups&&(G=1e3,e.useOverlapRules||dn(n,t)),de(n,e),e.applySemanticRules&&le(n),function n(e,t){void 0===t&&(t=d.a.MOBILE_WIDTH);var o=t-2*d.a.SECTION_MOBILE_MARGIN_Y;i.forEach(e,function(e){"appWidget"===e.conversionData.category&&(i.assign(e.conversionData,i.pick(i.get(e,["components",0,"conversionData"],{}),"fixedSize")),i.assign(e.conversionData.mobileHints,i.pick(i.get(e,["components",0,"conversionData","mobileHints"],{}),["recommendedWidth","recommendedHeight"]))),fn.f(e)||("boxContainer"===e.conversionData.category&&e.layout.width<=o?i.assign(e.conversionData,{rescaleMethod:"none",fixedSize:{width:e.layout.width}}):"boxContainer"===e.conversionData.category&&!e.conversionData.rescaleMethod&&e.layout.width<=400?i.assign(e.conversionData,{rescaleMethod:"proportional"}):n(O.getChildren(e),O.shouldStretchToScreenWidth(e)?t:o))})}(t),Z(n,!e.keepNotRecommendedMobileComponents))}var pe=.96;function ve(n,e,t){void 0===t&&(t=["x","y","width","height"]),1!==e&&i.assign(n.layout,i.zipObject(t,i.map(t,function(t){return Math.round(n.layout[t]*e)})))}function ge(n,e){ve(n,e),i.forEach(n.components,function(n){return ge(n,e)}),he(n,e)}function he(n,e){if(O.isTextComponent(n)){var t=n.conversionData.averageFontSize||0;n.layout.scale=t*e*pe/n.conversionData.mobileAdjustedAverageFontSize}}function ye(n,e){var t=i.get(n.conversionData,["mobileHints","recommendedHeight"]);if(t)n.layout.height=t;else if(O.isTextComponent(n))n.layout.height=d.a.DEFAULT_TEXT_HEIGHT;else{var o=i.get(n.conversionData.fixedSize,"height"),r=n.layout.height,a=n.conversionData.minHeight||0;i.isNumber(o)?n.layout.height=o:i.get(n.conversionData,"preserveAspectRatio",!0)?n.layout.height=Math.round(n.layout.height*e.scaleFactor):a&&(n.layout.height=0),n.layout.height=a<r?Math.max(n.layout.height,a):r;var c=O.getHeightAccordingToChildren(n,i.reject(n.components,"conversionData.isInvisible"),!1);c&&(!o||o<=c||O.containsComponent(n,O.isTextComponent))&&(n.layout.height=c)}}var Ce=function(n){return i.sortBy(n.components,function(e){return n.conversionData.componentsOrder.indexOf(e.id)})},Te=1,Ee=40,De=function(n){return i(n).filter(O.isTextComponent).forEach(function(n){return he(n,1)})},Oe=function(n){return i.maxBy(n,"conversionData.textLength")},be=function(n){return n.layout.x+n.layout.width};function Ne(n,e){var t=Ce(n);if(De(t),e>=Te)!function(n,e){var t=Oe(e),o=n.layout.width-be(e[1]);t.layout.width+=o,e[0]===t&&(e[1].layout.x+=o)}(n,t);else{var o=Oe(t),r=t[t.indexOf(o)?0:1],i=Object(O.isGraphicComponent)(r)?Ee:r.layout.width;if(r.layout.width*e>=i)return ve(r,e),void ve(o,e);var a=-Object(O.getXOverlap)(r,o),c=r.layout.width<i?r.layout.width:i,u=c/r.layout.width,s=(n.layout.width-c-a)/(be(t[1])-r.layout.width-a),f=["width","height"];ve(r,u,f),ve(o,s,f),t[1].layout.x=be(t[0])+a}}function Se(n,e,t,o){i.has(n,["conversionData","preset"])&&i.get(n,["conversionData","shouldApplyPreset"])?function n(e,t){return i.assign(e,i.omit(t,["conversionData","components"])),e.components&&(e.components=i(t.components).map(function(t){var o=O.getComponentByIdFromStructure(t.id,e);return o?n(o,t):null}).compact().value()),e}(n,n.conversionData.preset):n.layout.width>e||n.conversionData.shouldEnlargeToFitWidth||n.layout.width>d.a.MIN_WIDTH_FOR_ENLARGE||t||"row"===n.conversionData.rescaleMethod?xe(n,e,o):ye(n,{scaleFactor:1})}function Ie(n,e,t,o){void 0===o&&(o={imageScaleFactor:1,applyFontScaling:!0});var r=e.conversionData.topRightMargin||[0,0],a=Ce(n),c=i.head(a),u=function n(e,t,o){return"leftTop"===i.get(o,["conversionData","mobileHints","offsetOrigin"])?i.get(o.conversionData,["mobileHints","offsetY"],0):e.conversionData.hasTightYMargin||!o?0:o.conversionData.isTransparentContainer?n(e,t,i.head(o.components)):O.shouldStretchToScreenWidth(o)&&!o.layout.y?0:(t.conversionData.borderWidth||0)+(O.shouldStretchToScreenWidth(t)?d.a.SECTION_MOBILE_MARGIN_Y:d.a.COMPONENT_MOBILE_MARGIN_Y)}(n,e,c),s=u;i.forEach(a,function(c,f){var l=function(n,e){if("leftTop"===i.get(n.conversionData,["mobileHints","offsetOrigin"]))return i.get(n.conversionData,["mobileHints","offsetX"],0);if(e.conversionData.isTransparentContainer&&"column"!==e.conversionData.category)return 0;var t=e.conversionData.marginX;return i.isNumber(t)?t:(O.shouldStretchToScreenWidth(e)?d.a.SITE_SEGMENT_PADDING_X:d.a.COMPONENT_MOBILE_MARGIN_X)+i.get(e.conversionData,"borderWidth",0)}(c,e);(o.applyFontScaling&&O.isTextComponent(c)||c.conversionData.mobileScale)&&(c.layout.scale=c.conversionData.mobileScale);var m=O.shouldStretchToScreenWidth(c),p=l,v=l,g=c.conversionData.isInvisible||m?"screen":n.conversionData.naturalAlignment||"center";s<r[1]-u&&(v=Math.max(v,r[0]),"center"===g&&(p=v));var h,y,C=t-p-v,T=function(n,e,t,o,r){if(o)return e;var a=i.get(n.conversionData,["mobileHints","recommendedWidth"]);if(a)return a;if("photo"===n.conversionData.category&&1!==r.imageScaleFactor)return Math.min(t,Math.round(n.layout.width*r.imageScaleFactor));var c=i.get(n.conversionData.fixedSize,"width");return c?Math.min(e,+c):null}(c,t,C,m,o),E=i.isNumber(T);Se(c,E?T:C,E,o),s<r[1]&&T>C&&!c.conversionData.isTransparentContainer&&(s=r[1],v=p=l),i.isNumber(c.conversionData.yOffset)?s-=c.conversionData.yOffset:c.conversionData.yOffsetRatio&&(s-=c.layout.height*c.conversionData.yOffsetRatio),c.layout.x=function(n,e,t,o,r,a){return"leftTop"===i.get(n,["conversionData","mobileHints","offsetOrigin"])?i.get(a,["layout","x"],0)+i.get(n.conversionData,["mobileHints","offsetX"],0):a&&"rightTop"===i.get(n,["conversionData","mobileHints","offsetOrigin"])?a.layout.x+a.layout.width+i.get(n.conversionData,["mobileHints","offsetX"],0):a&&"leftBottom"===i.get(n,["conversionData","mobileHints","offsetOrigin"])?a.layout.x+i.get(n.conversionData,["mobileHints","offsetX"],0):"screen"===e?0:"left"===e?r:"right"===e?t-n.layout.width-o:Math.round((t-n.layout.width)/2)}(c,g,t,v,p,a[f-1]),c.layout.y=s-(c.conversionData.isInvisible&&!f?u+1:0),c.conversionData.stackLayout||(s+=c.conversionData.isInvisible?1:c.layout.height+(h=c,y=a[f+1],"leftBottom"===i.get(y,["conversionData","mobileHints","offsetOrigin"])?i.get(y.conversionData,["mobileHints","offsetY"],0):h&&"rightTop"===i.get(y,["conversionData","mobileHints","offsetOrigin"])?i.get(y.conversionData,["mobileHints","offsetY"],0)-h.layout.height:h&&"leftTop"===i.get(y,["conversionData","mobileHints","offsetOrigin"])?i.get(y.conversionData,["mobileHints","offsetY"],0)-h.layout.height:!y||y.conversionData.tightWithPreviousSibling?0:O.isTextComponent(h)&&!O.isTextComponent(y)?d.a.MARGIN_BETWEEN_TEXT_AND_NON_TEXT:d.a.COMPONENT_MOBILE_MARGIN_Y))})}function xe(n,e,t){void 0===t&&(t={imageScaleFactor:1,applyFontScaling:!0});var o=n.layout.width>0?e/n.layout.width:1,r=n.conversionData.rescaleMethod;"none"!==r&&(n.layout.width=e);var a=i.assign(t,{imageScaleFactor:n.conversionData.descendantImageScaleFactor||t.imageScaleFactor});switch(r){case"proportional":i.forEach(n.components,function(n){return ge(n,o)});break;case"logo":!function(n,e){i.forEach(n.components,function(n){return ge(n,i.min([e,Te]))})}(n,o);break;case"row":Ne(n,o);break;case"none":break;default:Ie(n,n,e,a)}ye(n,{scaleFactor:o})}function Me(n){var e={layout:O.getSnugLayout(n),conversionData:{rescaleMethod:"default",hasTightYMargin:!0,isTightContainer:!0},componentType:d.a.VIRTUAL_GROUP_TYPES.MERGE,components:n},t=F(e);return O.translateComps(n,-e.layout.x,-e.layout.y),t}function _e(n,e){return void 0===e&&(e=[]),e.push(n.id),i.forEach(O.getChildren(n),function(n){e=e.concat(_e(n))}),e}function Pe(n,e,t){i.defaults(n.conversionData,{blocks:[],blockLayout:[]});var o=O.getChildren(n);o||(o=n.components=[]);var r=function(n,e){var t=i.get(e,["conversionData","blocks"],[]);return i.findIndex(t,function(e){return i.includes(e,n)})}(t,n),a=Q.objectUtils.cloneDeep(e);a.layout.y=function(n,e,t){var o=i.get(e,["conversionData","blockLayout"]);if(n>=0)return o[n].y+o[n].height+d.a.COMPONENT_MOBILE_MARGIN_Y;if(!O.shouldStretchToScreenWidth(t))return d.a.COMPONENT_MOBILE_MARGIN_Y;return e.layout.y?d.a.SECTION_MOBILE_MARGIN_Y:0}(r,n,e),o.push(a);var c=i.get(n,["conversionData","blockLayout",r+1,"y"]);i.isNumber(c)&&Ae(n,r,a.layout.y+a.layout.height+d.a.COMPONENT_MOBILE_MARGIN_Y-c);n.conversionData.blocks.splice(r+1,0,[a.id]),n.conversionData.blockLayout.splice(r+1,0,a.layout)}function we(n){var e=O.getChildren(n);if(!O.isMasterPage(n)&&!i.isEmpty(e)){var t=i.reduce(e,function(n,e){return Math.max(n,e.layout.y+e.layout.height)},0),o=O.isPageComponent(n)?0:d.a.COMPONENT_MOBILE_MARGIN_Y;n.layout.height=Math.max(n.layout.height,t+o)}}function Ae(n,e,t){var o,r,a,c=O.getChildren(n);for(r=e+1;r<i.get(n,["conversionData","blocks","length"],0);r++){for(a=n.conversionData.blocks[r],o=0;o<a.length;o++)i.find(c,{id:a[o]}).layout.y+=t;n.conversionData.blockLayout[r].y+=t}if(e>-1)for(a=i.get(n,["conversionData","blocks",e]),o=0;o<a.length;o++)i.find(c,{id:a[o]})}function Re(n,e,t){if(O.isMasterPage(n)){var o=O.getChildren(n);W(o),t.reparentMobileSOAP&&function(n,e){var t=U(n,{}),o=i.remove(e,function(n){return!k(n)&&t[n.id]&&!O.isAllowedToBeInMasterPage(t[n.id])});i.forEach(o,function(n){var e=i.get(t,[n.id,"conversionData"]);i.set(e,"fixedSize",{width:n.layout.width,height:n.layout.height}),i.set(e,["mobileHints","propertyQuery"],n.propertyQuery)})}(o,O.getChildren(e))}var r=O.getAllCompsInStructure(n,!1,i.negate(O.isDesktopOnlyComponent)),a=O.getAllCompsInStructure(e);Be(e),function n(e,t){var o=O.getComponentByIdFromStructure(t.id,e);var r=i.get(o,"styleId");r&&i.set(t,"styleId",r);i.forEach(O.getChildren(t),n.bind(null,e))}(n,e);var c=sn(r,a);if(c.idsOfComponentsToDelete.length>0||c.idsOfComponentsToAdd.length>0){var u=t.keepNotRecommendedMobileComponents?c.idsOfComponentsToAdd:ke(c.idsOfComponentsToAdd,r);!function(n,e,t,o,r){Fe(n),Ge(n,e,o),function(n,e,t,o){var r,a,c,u=Q.objectUtils.cloneDeep(e);z(u,O.getChildren(u),o);var s,f,l,m,p=function(n,e,t){var o,r,a=[];for(o=n.length-1;o>=0;o--){var c=n[o],u=O.getComponentByIdFromStructure(c,e);if(O.isGroupComponent(u)){var s=i.partition(u.components,function(e){return i.includes(n,e.id)}),f=i(s[1]).map(function(n){return O.getComponentByIdFromStructure(n.id,t)}).compact().value(),l=!0;for(r=1;r<f.length;r++){var d=O.getParent(f[r-1].id,t),m=O.getParent(f[r].id,t);d.id!==m.id&&(l=!1)}if(!l){n.splice(o,1);continue}if(0===f.length)continue;var p=i.clone(u);p.components=[],p.layout=O.getSnugLayout(f);var v=O.getParent(f[0].id,t);for(O.addComponentsTo(v,[p]),r=0;r<f.length;r++){var g=f[r];O.reparentComponent(p,g),i.remove(O.getChildren(v),g)}a.push(n[o]),n.splice(o,1)}}return a}(t,u,n);i.isEmpty(p)||Fe(n),r=function(n,e){var t,o,r,a,c=[],u=[],s=n.map(function(n){return O.getComponentByIdFromStructure(n,e)});return s=i.without(s,null),i.isEmpty(s)?u:(c=s.map(function(n){return e=o=Q.objectUtils.cloneDeep(n),O.getChildren(e)&&(e.components=[],i.assign(e.conversionData,{blocks:[],blockLayout:[],componentsOrder:[]})),o;var e}),i.forEachRight(c,function(n){var e,o,f=!1;for(t=c.length-1;t>=0;t--)if(r=c[t],a=s[t],e=n,o=a,i.some(O.getChildren(o),{id:e.id})){f=!0,O.reparentComponent(r,n);break}f||u.push(n)}),u)}(t,u),me(u,o),i.isEmpty(t)||(function(n,e){i.forEach(n,function(n){var e=i.head(n.componentToAdd);O.isRescaleVirtualGroup(e)&&(O.translateComps(e.components,e.layout.x,e.layout.y),n.componentToAdd=e.components),L(e,e.components)}),i.forEach(n,function(n){i.remove(n.componentToAdd,function(n){return!i.includes(e,n.id)})})}(a=function n(e,t,o,r){var i,a,c,u,s,f,l,d,m,p,v,g=O.getChildren(e),h=[];if(g){for(u=r.map(function(n){return n.id}),i=0;i<g.length;i++){if(s=g[i],f=s.id,l=!1,u.indexOf(f)>=0){for(l=!0,d=-1,c=0;c<r.length;c++)if(r[c].id===f){d=c;break}r.splice(d,1)}if(O.isVirtualGroup(s))for(a=0;a<s.components.length;a++)if(u.indexOf(s.components[a].id)>-1){for(l=!0,d=-1,c=0;c<r.length;c++)if(r[c].id===s.components[a].id){d=c;break}r.splice(d,1)}l&&(m=s,p=Ye(e,t,f,o),v=p?O.getParent(p,o):Ue(s,t,o),h.push({componentToAdd:[m],futureMobileContainerOfAddedComponent:v,previousComponentIdThatAlsoExistInMobile:p}))}for(i=0;i<g.length;i++)h=h.concat(n(g[i],t,o,r))}return h}(u,u,n,r),t),s=a,m=[],i.forEach(s,function(n){for(l=!1,f=0;f<m.length;f++)if(n.futureMobileContainerOfAddedComponent===m[f].futureMobileContainerOfAddedComponent&&n.previousComponentIdThatAlsoExistInMobile===m[f].previousComponentIdThatAlsoExistInMobile){m[f].componentToAdd=m[f].componentToAdd.concat(n.componentToAdd),l=!0;break}l||m.push(n)}),function(n,e,t){var o=function(n,e){var t,o,r,a,c,u=[];for(t=0;t<n.length;t++)for(r=n[t].componentToAdd,o=0;o<r.length;o++)a=r[o],c=i.difference(_e(a),e),u=u.concat(c);return u}(e,t);Ge(n,o)}(n,c=m,t),function(n,e,t){var o,r,i,a,c,u={imageScaleFactor:1,applyFontScaling:t.applyFontScaling};for(o=0;o<n.length;o++)r=n[o].componentToAdd,i=n[o].futureMobileContainerOfAddedComponent,a=n[o].previousComponentIdThatAlsoExistInMobile,z(c=Me(r),c.components,t),me(c,t),c.layout.x=0,c.layout.width=O.isPageComponent(i)||O.isScreenWidthComponent(i)||O.isMasterPage(i)?d.a.MOBILE_WIDTH:i.layout.width,Ie(c,i,c.layout.width,u),ye(c,{scaleFactor:1}),Pe(i,c,a),we(i),en(i,i.components||i.children),Fe(i)}(c,0,o)),[].splice.apply(t,[t.length,0].concat(p))}(n,r,o,t),(O.isContainerComponent(n)||O.isPageComponent(n))&&O.ensureContainerTightlyWrapsChildren(n,O.getChildren(n),!0)}(e,c.idsOfComponentsToDelete,t,u,n),function n(e,t){var o=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"];i.forEach(O.getChildren(e),function(e){if(i.includes(o,e.componentType)){var r=O.getComponentByIdFromStructure(e.id,t),a=i.maxBy(e.components,"layout.height").layout.height;i.forEach(e.components,function(n){return i.assign(n.layout,{x:0,y:0,height:a})}),e.layout.height=a,e.components=i.sortBy(e.components,function(n){return i.findIndex(r.components,{id:n.id})})}n(e,t)})}(e,n)}Le(e)}function ke(n,e){var t=i.reduce(e,function(n,e){var t=i.get(e,["layout","fixedPosition"])&&!i.get(e,["conversionData","convertFixedPositionToAbsolute"]),o=!O.isFixedPositionAllowed(e);return t&&o?i.concat(n,i.keys(O.getAllCompsInStructure(e))):n},[]);return i.difference(n,t)}function Be(n){n.layout&&(n.existsBeforeMerge=!0),i.forEach(O.getChildren(n),Be)}function Le(n){delete n.existsBeforeMerge,i.forEach(O.getChildren(n),Le)}function Ge(n,e,t){t=t||[];var o,r,a,c,u=n.components||n.children;u&&(!function(n,e,t){var o=i.map(t,"id");i.forEachRight(n,function(n){if(!i.includes(o,n)){var t=O.getComponentsByIds(e,[n])[0];O.isGroupComponent(t)&&(O.removeGroup(t,e),Fe(e))}})}(e,n,u),o=i.map(u,"id"),r=i.intersection(e,o),function(n,e,t){i(n).filter(function(n){return O.isContainerComponent(n)||O.isPageComponent(n)}).forEach(function(n){i(n.components).map("id").filter(function(n){return!i.includes(t,n)}).forEach(function(n){e.push(n)})})}(a=O.getComponentsByIds(n,r),t,e),a.length>0&&(c=a.map(function(n){return n.id}).indexOf(function(n){var e,t,o,r,i=O.getChildren(n);if(i){for(o=-Number.MAX_VALUE,e=0;e<i.length;e++)(r=i[e]).layout.y+r.layout.height>o&&(t=r,o=r.layout.y+r.layout.height);return t}}(n).id)>-1,O.removeChildrenFrom(n,a),function(n,e){var t=i.get(n,["conversionData","blocks"],[]),o=i.transform(t,function(t,o,r){var a=o.length;n.conversionData.blocks[r]=i.difference(o,e),a!==n.conversionData.blocks[r].length&&t.push(r)},[]);i.forEachRight(t,function(e,t){if(i.includes(o,t))i.isEmpty(n.conversionData.blocks[t])&&(Ae(r=n,a=t,-(r.conversionData.blockLayout[a].height+d.a.COMPONENT_MOBILE_MARGIN_Y)),n.conversionData.blocks.splice(t,1),n.conversionData.blockLayout.splice(t,1));else{var r,a,c=n.conversionData.blockLayout[t],u=O.getComponentsByIds(n,n.conversionData.blocks[t]),s=O.getSnugLayout(u);n.conversionData.blockLayout[t]=s;var f=s.y-c.y;0!==f&&Ae(n,t-1,-f);var l=c.height-n.conversionData.blockLayout[t].height,m=l-f;0!==l&&Ae(n,t,-m)}})}(n,r),c&&O.ensureContainerTightlyWrapsChildren(n,u,!0,50)),i.forEach(u,function(n){Ge(n,e,t)}))}function Fe(n){i.has(n,"conversionData")||i.set(n,["conversionData"],{});var e=O.getChildren(n);if(e){n.conversionData.blocks=[],n.conversionData.blockLayout=[];var t=Q.objectUtils.cloneDeep(e);t.sort(ze);var o=[],r=0;i.forEach(t,function(e,a){if(o.push(e.id),a!==t.length-1){var c=i.slice(t,r,a+1);i.some(c,function(n){return je(n,t[a+1])})||(He(n,o),o=[],r=a+1)}else He(n,o)}),i.forEach(e,function(n){return Fe(n)})}}function He(n,e){var t=O.getComponentsByIds(n,e),o=O.getSnugLayout(t);n.conversionData.blockLayout.push(o),n.conversionData.blocks.push(e)}var je=function(n,e){return O.getYOverlap(n,e)/Math.min(n.layout.height,e.layout.height)>.25};function ze(n,e){if(!je(n,e)&&n.layout.y!==e.layout.y)return n.layout.y<e.layout.y?-1:1;var t=O.isScreenWidthComponent(n),o=O.isScreenWidthComponent(e);return t?o?0:-1:o?1:n.layout.x<e.layout.x?-1:n.layout.x>e.layout.x?1:0}function We(n,e){if(i.get(e,["conversionData","nestOverlayingSiblings"],!0))return!0;var t=i.map(O.getChildren(e),"id");return i.includes(t,n)}function Ue(n,e,t){for(var o,r,a=n.id,c=function n(e){var t={},o=O.getChildren(e);if(o)for(var r=0,a=o;r<a.length;r++){var c=a[r];t[c.id]=e.id,t=i.merge(t,n(c))}return t}(e),u=c[a];!o||!We(n.id,r);){var s=(o=O.getComponentByIdFromStructure(u,t))?O.getChildren(o):[];if(r=O.getComponentByIdFromStructure(u,e),u=c[u],O.shouldReparentCompToChildOfContainer(n,r)&&!i.isEmpty(s))return i.head(s)}return o}function Ye(n,e,t,o){if(O.isVirtualGroup(n))return Ye(O.getParent(n.id,e),e,n.id,o);for(var r=i.get(n,["conversionData","componentsOrder"],[]),a=r.indexOf(t)-1;a>=0;a--){var c=r[a];if("PAGES_CONTAINER"!==c){var u=i.find(O.getChildren(n),{id:c});if(O.getComponentByIdFromStructure(c,o))return c;if(O.isVirtualGroup(u))for(var s=0;s<u.components.length;s++){var f=i.get(u,["conversionData","componentsOrder",s]);if(O.getComponentByIdFromStructure(f,o))return f}}}return null}function Ve(n,e){return i(n).map(function(n){return O.getComponentByIdFromStructure(n,e)}).compact().value()}function Xe(n,e){var t=Ve(n,e),o=function(n){return i.map(n,function(n){var e=Q.objectUtils.cloneDeep(n);return O.getChildren(e)&&(e.components=[]),e})}(t),r=[];return i.forEach(o,function(n){for(var e=0;e<o.length;e++){var a=t[e];if(i.some(O.getChildren(a),{id:n.id})){var c=o[e];return void O.addComponentsTo(c,[n])}}r.push(n)}),r}function qe(n,e,t,o){void 0===o&&(o={});var r=O.getChildren(n);return r?(i.forEach(r,function(r){qe(r,e,t,o);var a=i(t).remove({id:r.id}).head();if(!i.isEmpty(a)){var c=O.getComponentByIdFromStructure(n.id,e)||e;o[c.id]=o[c.id]||{componentsToAdd:[],parent:c},o[c.id].componentsToAdd.push(a)}}),o):o}function Qe(n){return O.getAllCompsInStructure(n,!1,i.negate(k))}function Ke(n,e,t){var o=i.keys(t),r=i.difference(o,n),a=rn(e,t);return i.uniq(r.concat(a))}function Ze(n,e){if(!i.isEmpty(e)){var t=O.getChildren(n);if(t){var o=i.map(t,"id"),r=i.remove(e,function(n){return i.includes(o,n)}),a=O.getComponentsByIds(n,r);a.length>0&&O.removeChildrenFrom(n,a),i.forEach(t,function(n){return Ze(n,e)})}}}function Je(n,e){return i.some(Object(O.getChildren)(e),function(e){return e.id===n})}function $e(n,e){return i.find(e,function(e){return Je(n,e)})}function nt(n,e,t){if(!i.isEmpty(t)){var o=qe(e,n,Xe(t,e));i.forEach(o,function(n){var e=Q.objectUtils.cloneDeep(n.componentsToAdd),t=i.flatMap(e,function(n){return i.values(O.getAllCompsInStructure(n))});i.forEach(t,function(n){return O.shouldStretchToScreenWidth(n)?i.set(n,["layout","width"],d.a.MOBILE_WIDTH):i.set(n,["layout","width"],i.min([n.layout.width,d.a.MOBILE_WIDTH]))}),O.addComponentsTo(n.parent,e)}),function(n,e,t){var o=O.getAllCompsInStructure(e),r=O.getAllCompsInStructure(t),a=i.filter(n,function(n){return i.has(o,n)});i.forEach(a,function(n){var e=$e(n,o),t=$e(n,r);if(e.id===t.id){var a=Object(O.getChildren)(e),c=i.filter(Object(O.getChildren)(t),function(n){return Je(n.id,e)}),u=i.get(c,[i.findIndex(c,{id:n})+1,"id"],null);if(u){var s=i.remove(a,{id:n});a.splice(i.findIndex(a,{id:u}),0,i.head(s))}}})}(t,n,e)}}function et(n,e){var t,o=function(n){return O.getAllCompsInStructure(n,!1,i.negate(O.isDesktopOnlyComponent))}(n);t=n,j(o),X(t,O.getChildren(t),!0),O.isMasterPage(t)&&W(O.getChildren(t));var r=i(o).reject(["conversionData.mobileHints.hidden",!0]).map("id").value();Ze(e,Ke(r,o,Qe(e))),Ze(e,function(n,e){var t=Ve(n,e);return i(t).flatMap(function(n){return i.values(O.getAllCompsInStructure(n))}).map("id").uniq().difference(n).value()}(i.difference(r,i.keys(Qe(e))),n)),nt(e,n,i.difference(r,i.keys(Qe(e))))}var tt=d.a.MOBILE_WIDTH,ot={HEADER:"SITE_HEADER",SUBHEADER:"SUBHEADER",FOOTER:"SITE_FOOTER",PAGES_CONTAINER:"PAGES_CONTAINER",TINY_MENU:"TINY_MENU"},rt=[ot.HEADER,ot.SUBHEADER,ot.PAGES_CONTAINER,ot.FOOTER],it=function(n){return i.get(n,["conversionData","siteSegmentRole"],"")};function at(n){!function(n){var e=i.findIndex(n,function(n){return ot.HEADER===i.get(n,["conversionData","siteSegmentRole"])}),t=i.findIndex(n,function(n){return ot.SUBHEADER===i.get(n,["conversionData","siteSegmentRole"])});if(-1!==e&&-1!==t&&t!==e+1){var o=n.splice(t,1)[0];e=i.findIndex(n,function(n){return ot.HEADER===i.get(n,["conversionData","siteSegmentRole"])}),n.splice(e+1,0,o)}}(n),ct(n)}function ct(n){!function(n){var e=i.find(n,{id:ot.PAGES_CONTAINER}),t=i.get(e,["components",0,"layout"]);i.assign(t,{width:tt,x:0})}(n),function(n){var e=0;i.forEach(rt,function(t){var o=i.find(n,function(n){return it(n)===t});o&&(i.assign(o.layout,{x:0,width:tt,y:e}),e+=o.layout.height)})}(n)}function ut(n){!function(n){i(n.children).filter(O.isSiteSegment).reject({id:ot.PAGES_CONTAINER}).forEach(function(n){xe(n,tt),Object(O.ensureContainerTightlyWrapsChildren)(n,n.components,!0)})}(n),at(Object(O.getChildren)(n)),function(n){B(n,ot.TINY_MENU)}(n)}function st(n,e,t){if(un(n,e),Re(n,e,t),"masterPage"===e.id){var o=O.getChildren(e),r=O.getChildren(n);i.forEach(o,function(n){return i.set(n,"conversionData",i.get(i.find(r,{id:n.id}),"conversionData"))}),t.fixMasterPageStructureOrder?at(o):ct(o)}return on(e),O.getChildren(e)}function ft(n,e,t){t.analyzeOnly||z(n,e,t),me(n,t)}t.d(e,"textUtils",function(){return lt}),t.d(e,"structuresComparer",function(){return dt}),t.d(e,"mobileOnlyComponents",function(){return mt}),t.d(e,"conversion",function(){return pt}),t.d(e,"mobileHints",function(){return vt}),t.d(e,"conversionUtils",function(){return O}),t.d(e,"conversionConfig",function(){return d.a});var lt={getFontSizeByFontName:function(n,e,t){if(void 0===t&&(t=a),0===e)return 0;var o,r,i,c,u,s,l,d,m=t[n];return m?(o=m.referencePoints,r=f,c=(i=e)<o[1]?o[0]:o[1],u=i<o[1]?r[0]:r[1],s=i<o[1]?o[1]:o[2],l=i<o[1]?r[1]:r[2],i*(d=(u-l)/(c-s))+(l-s*d)):e},convertFontSizeByTextLength:function(n,e){var t=s,o=c,r=u,a=Math.round(l(n,o.min,o.max))-o.min,f=Math.round(l(e,r.min,r.max))-r.min;return i.get(t,[a,f])}},dt={getComponentIdsAddedToDesktopStructure:an},mt={isMobileOnlyComponentId:function(n){return i.includes(A,n)},addComponent:B,getAdditionalStyles:function(){return x()}},pt={inspectStructure:ft,synchronizePages:function(n,e){return cn(n,e),i.mapValues(n,function(n,t){return function(n,e){if(et(n,e),un(n,e),"masterPage"===e.id){var t=O.getChildren(e),o=O.getChildren(n);i.forEach(t,function(n){return i.set(n,"conversionData",i.get(i.find(o,{id:n.id}),"conversionData"))}),ct(t)}return on(e),O.getChildren(e)}(n,e[t])})},mergeDesktopPagesWithMobile:function(n,e,t){return cn(n,e),i.mapValues(n,function(n,o){return st(n,e[o],t)})},mergeDesktopStructureWithMobile:st,convertDesktopPageToMobile:function(n,e,t){return ft(n,e,t),O.isMasterPage(n)?ut(n):xe(n,d.a.MOBILE_WIDTH),en(n,e),on(n),O.getChildren(n)}},vt={getConversionOrder:function(n){var e=i.map(n,"id"),t=p(n,"y"),o=v(t),r=i.reduce(o,function(n,t){if(1===i.size(t))return n.concat(t);var o=p(t,"x"),r=v(o);return i.reduce(r,function(n,t){if(1===i.size(t))return n.concat(t);var o=i.sortBy(t,function(n){return e.indexOf(n.id)});return n.concat(o)},n)},[]);return i.map(r,"id")},parseMobilePreset:function(n){var e=D(n);if(!e)return{};var t=e.components?E(e):{};return i.set(t,e.id,h(e)),t}}}])});
//# sourceMappingURL=mobileCore.js.map